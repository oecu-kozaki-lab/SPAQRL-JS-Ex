<!DOCTYPE html>
<html>
  <head>
  <script>
  /*参考にしたページ
    https://www.mediawiki.org/wiki/API:Cross-site_requests#Example
    
    メモ
    https://techacademy.jp/magazine/19615
    https://ja.javascript.info/xmlhttprequest
  */
  
//  var url = "https://en.wikipedia.org/w/api.php"; 
  var urlw = "https://www.wikidata.org/w/api.php?action=wbsearchentities&search=週刊少年ジャンプ&language=ja&format=json&origin=*";
  /*
var params = {
    action: "query",
    list: "search",
    srsearch: "Nelson Mandela",
    format: "json"
};

url = url + "?origin=*";
Object.keys(params).forEach(function(key){url += "&" + key + "=" + params[key];});
*/

fetch(urlw)
    .then(function(response){return response.json();})
    .then(function(response) {
      var data = response;
      console.log(data);
      
      //結果をJSON形式でフォームに表示
	  document.getElementById('result_data').value = JSON.stringify(data);
     
      //取得したIDの一覧を表示
      var Rdiv = document.getElementById('result_div');
      Rdiv.innerHTML = "取得されたID:<br>";
      for (var i = 0; i < data.search.length; i++) {
      	Rdiv.innerHTML+=data.search[i].id +"<br>";
      }
      
    })
    .catch(function(error){console.log(error);});
 
    </script>

  </head>
  <body>
  <div>
		APIの応答<br>
		<textarea id="result_data" cols="60" rows="10"></textarea><br>
  </div>
  <div id="result_div">
  </div>
  
  </body>
</html>